### 复制构造函数的调用顺序分析

1. **对象初始化时**

   使用已有对象初始化新对象

2. **形实结合时**

   对象作为参数传递到函数时

3. **返回对象时**

   函数的返回类型是一个对象时



#### 下面是关于复制构造函数调用顺序的测试和分析

##### 测试代码的核心：

```
int main() {

	Point myp1(1, 1), myp2(2, 2); //建立Point类的对象

	Line line(myp1, myp2); //建立Line类的对象

	Line line2(line); //利用复制构造函数建立一个新对象

	return 0;

}
```

其中

**Point是一个点类，只有俩成员，坐标x和坐标y**

**Line是一个线段类，只有俩成员，两个点类p1和p2**

他们各有一个构造函数、复制构造函数和析构函数

```
Point(int xx = 0, int yy = 0) //点类的构造函数
	{
		x = xx;
		y = yy;
		count++;
		cout << "调用点" << count << "(" << x << "," << y << ")的构造函数" << endl;
	}
```

```
Point::Point(Point& p) { //点类的复制构造函数

	x = p.x;

	y = p.y;

	count++;

	cout << "调用点" << count << "(" << x << "," << y << ")的复制构造函数" << endl;

}
```

```
Point::~Point()	//点类的析构函数
{
	cout << "调用点" << count << "(" << x << "," << y << ")的析构函数" << endl;
	count--;
}
```

```
Line::Line(Point xp1, Point xp2) : p1(xp1), p2(xp2) 
{
	cout << "调用线的构造函数" << endl;
}

Line::Line(Line& l) : p1(l.p1), p2(l.p2) {//组合类的复制构造函数

	cout << "调用线的复制构造函数" << endl;
}

Line::~Line()
{
	cout << "调用线的析构函数" << endl;
}
```



#### 对三条语句逐渐累加进行测试



##### 只测第一条语句

![情况一](E:\repository\6.26复制构造函数调用顺序\情况一.png)



测试结果及分析

![分析一](E:\repository\6.26复制构造函数调用顺序\分析一.png)



##### 测试前两条语句

![情况二](E:\repository\6.26复制构造函数调用顺序\情况二.png)



测试结果及分析

![分析二](E:\repository\6.26复制构造函数调用顺序\分析二.png)



##### 测试三条语句

##### ![情况三](E:\repository\6.26复制构造函数调用顺序\情况三.png)



测试结果及分析

![分析三](E:\repository\6.26复制构造函数调用顺序\分析三.png)